<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>leptos-fluent</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="Internationalization framework for Leptos using Fluent.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="./mdbook-admonish.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User guide</li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="basic-usage.html"><strong aria-hidden="true">2.</strong> Basic usage</a></li><li class="chapter-item expanded "><a href="strategies.html"><strong aria-hidden="true">3.</strong> Strategies</a></li><li class="chapter-item expanded "><a href="languages.html"><strong aria-hidden="true">4.</strong> Languages</a></li><li class="chapter-item expanded "><a href="checking-translations.html"><strong aria-hidden="true">5.</strong> Checking translations</a></li><li class="chapter-item expanded "><a href="faqs.html"><strong aria-hidden="true">6.</strong> FAQs</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="leptos_fluent.html"><strong aria-hidden="true">7.</strong> leptos_fluent!</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">leptos-fluent</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/mondeja/leptos-fluent/tree/master/book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><strong>leptos-fluent</strong> is a framework for internationalizing <a href="https://leptos.dev">Leptos</a> applications
using <a href="https://projectfluent.org">Fluent</a>. It has all the batteries included to handle language switching,
translations management, strategies for activating translations at
initialization, different modes of persistent storage, and more.</p>
<p><a href="https://crates.io/crates/leptos-fluent"><img src="https://img.shields.io/crates/v/leptos-fluent?logo=rust" alt="Crates.io" /></a>
<a href="https://github.com/mondeja/leptos-fluent/blob/master/LICENSE.md"><img src="https://img.shields.io/crates/l/leptos-fluent?logo=mit" alt="License" /></a>
<a href="https://docs.rs/leptos-fluent"><img src="https://img.shields.io/docsrs/leptos-fluent?logo=docs.rs" alt="docs.rs" /></a>
<a href="https://crates.io/crates/leptos-fluent"><img src="https://img.shields.io/crates/d/leptos-fluent" alt="Crates.io downloads" /></a></p>
<h2 id="alternatives"><a class="header" href="#alternatives">Alternatives</a></h2>
<p>The unique alternative to <strong>leptos-fluent</strong> currently is <a href="https://github.com/Baptistemontan/leptos_i18n">Leptos i18n</a>, which
follows a different approach. The main differences are:</p>
<ul>
<li><code>leptos-fluent</code> uses <a href="https://projectfluent.org">Fluent</a> files and the Fluent syntax for translations,
while <code>leptos_i18n</code> uses JSON files and a custom syntax.</li>
<li><code>leptos-fluent</code> defines all the configuration in a macro and an optional
languages file, while <code>leptos_i18n</code> defines the configuration in a
<code>[package.metadata.leptos-i18n]</code> section in <em>Cargo.toml</em>.</li>
<li><code>leptos-fluent</code> allows to instantiate multiple internationalization contexts,
while <code>leptos_i18n</code> only allows one.</li>
<li><code>leptos-fluent</code> has a lot of strategies for activating the initial language
of the user at initialization and updating it when the user changes the
language, while <code>leptos_i18n</code> only follows the cookie strategy.</li>
<li><code>leptos-fluent</code> automatically builds language names and directions based on
language codes, while <code>leptos_i18n</code> don't.</li>
<li><code>leptos-fluent</code> has multiple side effects for updating the language in the
client, while <code>leptos_i18n</code> only has the <code>&lt;html lang="..."&gt;</code> attribute
and is not configurable.</li>
</ul>
<h2 id="project-goals"><a class="header" href="#project-goals">Project goals</a></h2>
<p>The main goals of <strong>leptos-fluent</strong> are:</p>
<ul>
<li>To provide a simple and easy-to-use API for internationalizing Leptos
applications.</li>
<li>Be the most fully featured internationalization framework in any language.</li>
<li>Be the most performant internationalization framework available.</li>
</ul>
<p>Defining the internationalization strategy using a macro allows to generate
the less code possible for each possible configuration.</p>
<h2 id="help-and-support"><a class="header" href="#help-and-support">Help and support</a></h2>
<!-- markdownlint-disable MD013 -->
<p><a href="https://discord.com/channels/1031524867910148188/1251579884371705927"><img src="https://img.shields.io/badge/Discord-grey?logo=discord&amp;logoColor=white" alt="Discord channel" /></a></p>
<!-- markdownlint-enable MD013 -->
<p>You can ask for help and support in the <a href="https://discord.com/channels/1031524867910148188/1251579884371705927"><code>#leptos-fluent</code> channel</a> of
<a href="https://discord.com/channels/1031524867910148188">Leptos Discord server</a>, <a href="https://github.com/mondeja/leptos-fluent/discussions/new">open a discussion</a> in the GitHub repository or
report bugs by <a href="https://github.com/mondeja/leptos-fluent/issues/new">opening an issue</a>.</p>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p><a href="https://github.com/mondeja/leptos-fluent/issues?q=is%3Aissue+is%3Aopen+label%3A%22help+wanted%22"><img src="https://img.shields.io/badge/dynamic/json?url=https%3A%2F%2Fapi.github.com%2Fsearch%2Fissues%3Fq%3Drepo%3Amondeja%2Fleptos-fluent%2520label%3A%2522help%2520wanted%2522%2520is%3Aopen%2520-linked%3Apr&amp;query=%24.total_count&amp;suffix=%20open&amp;logo=github&amp;label=help%20wanted%20issues&amp;color=228f6c&amp;labelColor=228f6c&amp;logoColor=white&amp;style=flat-square" alt="Help wanted issues" /></a></p>
<p>See <a href="https://github.com/mondeja/leptos-fluent/blob/master/CONTRIBUTING.md"><em>CONTRIBUTING.md</em></a> file for more information about how to setup the
development environment and contribute to the project.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<ul>
<li><a href="install.html#csr">CSR</a></li>
<li><a href="install.html#ssr">SSR</a></li>
<li><a href="install.html#desktop-applications">Desktop applications</a></li>
<li><a href="install.html#nightly-toolchain">Nightly toolchain</a></li>
<li><a href="install.html#language-files">Language files</a></li>
<li><a href="install.html#features">Features</a></li>
</ul>
<h2 id="csr"><a class="header" href="#csr">CSR</a></h2>
<p>For client side rendering apps install <strong>leptos-fluent</strong> and <a href="https://github.com/XAMPPRocky/fluent-templates"><code>fluent-templates</code></a>:</p>
<pre><code class="language-toml">[dependencies]
leptos-fluent = "0.1"
fluent-templates = "0.9"
</code></pre>
<!-- markdownlint-disable MD033 -->
<details>
<summary>Minimal</summary>
<p>Using <code>default-features = false</code> the <code>json</code> default feature of
<strong>leptos-fluent</strong> will not be enabled, so the <code>languages</code> parameter
of <a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a> macro will not be available.</p>
<pre><code class="language-toml">[dependencies]
leptos-fluent = { version = "0.1", default-features = false }
fluent-templates = "0.9"
</code></pre>
</details>
<!-- markdownlint-enable MD033 -->
<h2 id="ssr"><a class="header" href="#ssr">SSR</a></h2>
<p>For server side rendering apps install <strong>leptos-fluent</strong>, <a href="https://github.com/XAMPPRocky/fluent-templates"><code>fluent-templates</code></a>
and activate the <code>hydrate</code>, <code>ssr</code> and <code>actix</code>/<code>axum</code> features in their
respective features set.</p>
<pre><code class="language-toml">[dependencies]
leptos-fluent = "0.1"
fluent-templates = "0.9"

[features]
hydrate = [
  "leptos-fluent/hydrate"
]
ssr = [
  "leptos-fluent/ssr",
  "leptos-fluent/actix",  # actix and axum are supported
]

# Using cargo-leptos
[package.metadata.leptos]
watch-additional-files = ["locales"]
</code></pre>
<h2 id="desktop-applications"><a class="header" href="#desktop-applications">Desktop applications</a></h2>
<p><strong>leptos-fluent</strong> can be installed on non-wasm targets, like desktop
applications. You need to install <code>leptos-fluent</code>, <a href="https://github.com/XAMPPRocky/fluent-templates"><code>fluent-templates</code></a>
and enable the <code>system</code> feature:</p>
<pre><code class="language-toml">[dependencies]
leptos-fluent = { version = "0.1", features = ["system"] }
fluent-templates = "0.9"
</code></pre>
<div id="admonition-example" class="admonition admonish-example" role="note" aria-labelledby="admonition-example-title">
<div class="admonition-title">
<div id="admonition-example-title">
<p>Example</p>
</div>
<a class="admonition-anchor-link" href="install.html#admonition-example"></a>
</div>
<div>
<p>See the <a href="https://github.com/mondeja/leptos-fluent/tree/master/examples/system-gtk">GTK example</a>.</p>
</div>
</div>
<h2 id="nightly-toolchain"><a class="header" href="#nightly-toolchain">Nightly toolchain</a></h2>
<p><strong>leptos-fluent</strong> builds nightly functionalities by enabling the <code>nightly</code>
feature:</p>
<pre><code class="language-toml">[dependencies]
leptos-fluent = { version = "0.1", features = ["nightly"] }
fluent-templates = "0.9"
</code></pre>
<h2 id="language-files"><a class="header" href="#language-files">Language files</a></h2>
<p>By default, <strong>leptos-fluent</strong> supports JSON languages files. To use other
formats to load custom languages, the <code>json5</code> or <code>yaml</code> features can be
enabled:</p>
<pre><code class="language-toml">[dependencies]
fluent-templates = "0.9"
leptos-fluent = {
  version = "0.1", features = ["json5"], default-features = false
}
</code></pre>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="install.html#admonition-tip"></a>
</div>
<div>
<p>See <a href="https://mondeja.github.io/leptos-fluent/languages.html"><strong>4. Languages</strong></a>.</p>
</div>
</div>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li><strong>Server Side Rendering</strong>: <code>ssr</code></li>
<li><strong>Hydration</strong>: <code>hydrate</code></li>
<li><strong>Actix Web integration</strong>: <code>actix</code></li>
<li><strong>Axum integration</strong>: <code>axum</code></li>
<li><strong>Nightly toolchain</strong>: <code>nightly</code></li>
<li><strong>Desktop applications</strong>: <code>system</code></li>
<li><strong>JSON languages file</strong>: <code>json</code> (enabled by default)</li>
<li><strong>YAML languages file</strong>: <code>yaml</code></li>
<li><strong>JSON5 languages file</strong>: <code>json5</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basic-usage"><a class="header" href="#basic-usage">Basic usage</a></h1>
<ul>
<li><a href="basic-usage.html#minimal-skeleton">Minimal skeleton</a></li>
<li><a href="basic-usage.html#translating-messages">Translating messages</a></li>
<li><a href="basic-usage.html#retrieving-the-i18n-context">Retrieving the <code>I18n</code> context</a></li>
<li><a href="basic-usage.html#using-the-i18n-context">Using the <code>I18n</code> context</a>
<ul>
<li><a href="basic-usage.html#update-language">Update language</a></li>
<li><a href="basic-usage.html#get-active-language">Get active language</a></li>
<li><a href="basic-usage.html#get-available-languages">Get available languages</a></li>
<li><a href="basic-usage.html#check-if-a-language-is-active">Check if a language is active</a></li>
</ul>
</li>
</ul>
<h2 id="minimal-skeleton"><a class="header" href="#minimal-skeleton">Minimal skeleton</a></h2>
<p>The most basic CSR app is reproduced here:</p>
<pre><code class="language-plaintext">.
‚îú‚îÄ‚îÄ üìÑ Cargo.toml
‚îú‚îÄ‚îÄ üìÅ locales
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ en
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ main.ftl
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ es
‚îÇ       ‚îî‚îÄ‚îÄ üìÑ main.ftl
‚îî‚îÄ‚îÄ üìÅ src
    ‚îú‚îÄ‚îÄ üìÑ main.rs
    ‚îî‚îÄ‚îÄ üìÑ lib.rs
</code></pre>
<pre><code class="language-ftl"># locales/en/main.ftl
select-a-language = Select a language:
language-selected-is = The selected language is { $lang }.
</code></pre>
<pre><code class="language-ftl"># locales/es/main.ftl
select-a-language = Selecciona un idioma:
language-selected-is = El idioma seleccionado es { $lang }.
</code></pre>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// src/lib.rs
use fluent_templates::static_loader;
use leptos::*;
use leptos_fluent::{expect_i18n, leptos_fluent, move_tr, Language};

static_loader! {
    pub static TRANSLATIONS = {
        locales: "./locales",
        fallback_language: "en",
    };
}

#[component]
pub fn App() -&gt; impl IntoView {
    leptos_fluent! {{
        translations: [TRANSLATIONS],
        locales: "./locales",
    }};

    view! { &lt;LanguageSelector/&gt; }
}

#[component]
fn LanguageSelector() -&gt; impl IntoView {
    // Use `expect_i18n()` to get the current i18n context:
    let i18n = expect_i18n();

    view! {
        &lt;p&gt;{move_tr!("select-a-language")}&lt;/p&gt;
        &lt;fieldset&gt;
            {move || {
                i18n.languages.iter().map(|lang| render_language(lang)).collect::&lt;Vec&lt;_&gt;&gt;()
            }}
        &lt;/fieldset&gt;
        &lt;p&gt;
            {move_tr!(
                 "language-selected-is",
                 { "lang" =&gt; i18n.language.get().name }
            )}
        &lt;/p&gt;
    }
}

fn render_language(lang: &amp;'static Language) -&gt; impl IntoView {
    // Passed as atrribute, `Language` is converted to their code,
    // so `&lt;input id=lang` becomes `&lt;input id=lang.id.to_string()`
    view! {
        &lt;div&gt;
            &lt;label for=lang&gt;{lang.name}&lt;/label&gt;
            &lt;input
                id=lang
                value=lang
                name="language"
                checked=lang.is_active()
                on:click=move |_| lang.activate()
                type="radio"
            /&gt;
        &lt;/div&gt;
    }
}
<span class="boring">}</span></code></pre></pre>
<pre><pre class="playground"><code class="language-rust edition2021">// src/main.rs
pub fn main() {
    console_error_panic_hook::set_once();
    leptos::mount_to_body(minimal_example::App);
}</code></pre></pre>
<pre><code class="language-toml"># Cargo.toml
[package]
name = "minimal-example"
edition = "2021"
version = "0.1.0"

[lib]
name = "minimal_example"
path = "src/lib.rs"

[dependencies]
leptos = { version = "0.6.12", features = ["csr"] }
leptos-fluent = "0.1"
fluent-templates = "0.9"
console_error_panic_hook = "0.1"

# Using cargo-leptos
[package.metadata.leptos]
watch-additional-files = ["locales"]
</code></pre>
<h2 id="translating-messages"><a class="header" href="#translating-messages">Translating messages</a></h2>
<p>Use the <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.move_tr.html"><code>move_tr!</code></a> macro to translate a string. The macro takes the key of the
translation and an optional object with the variables to interpolate:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>move_tr!("select-a-language")

move_tr!("language-selected-is", { "lang" =&gt; i18n.language.get().name })
<span class="boring">}</span></code></pre></pre>
<p>Additionally, use the <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.tr.html"><code>tr!</code></a> macro to translate a string inside
a reactive context. Note that if is not inside a reactive context,
the translation won't be updated on the fly when the language changes.
This can lead to warnings in console output like:</p>
<div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="basic-usage.html#admonition-warning"></a>
</div>
<div>
<pre><code class="language-shell">At `./path/to/file.rs:ln`, you access a signal or memo (defined at
`./path/to/file.rs:ln`) outside of a reactive context. This might mean your
app is not responding to changes in signal values in the way you expect.
</code></pre>
</div>
</div>
<p>Can be fixed by replacing calls to <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.tr.html"><code>tr!</code></a> with <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.move_tr.html"><code>move_tr!</code></a> or wrapping the
<a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.tr.html"><code>tr!</code></a> calls in a reactive context.</p>
<p>The previous code <em>could</em> be rewritten as:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>move || tr!("select-a-language")

move || tr!("language-selected-is", { "lang" =&gt; i18n.language.get().name })
<span class="boring">}</span></code></pre></pre>
<p>The main difference is that <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.move_tr.html"><code>move_tr!</code></a> encapsulates the movement in a
<a href="https://docs.rs/leptos/latest/leptos/struct.Signal.html"><code>leptos::Signal</code></a>, strictly would be rewritten as:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos::Signal::derive(move || tr!("select-a-language"))
<span class="boring">}</span></code></pre></pre>
<h2 id="retrieving-the-i18n-context"><a class="header" href="#retrieving-the-i18n-context">Retrieving the <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html"><code>I18n</code></a> context</a></h2>
<p>Use the <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/fn.expect_i18n.html"><code>expect_i18n</code></a> function to get the current i18n context:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let i18n = leptos_fluent::expect_i18n();
<span class="boring">}</span></code></pre></pre>
<p>It is exported as <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/fn.i18n.html"><code>i18n</code></a> too:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let i18n = leptos_fluent::i18n();
<span class="boring">}</span></code></pre></pre>
<p>The function <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/fn.use_i18n.html"><code>use_i18n</code></a> returns an <code>Option</code> with the current i18n context:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let i18n = leptos_fluent::use_i18n().expect("No `I18n` context found");
<span class="boring">}</span></code></pre></pre>
<h2 id="using-the-i18n-context"><a class="header" href="#using-the-i18n-context">Using the <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html"><code>I18n</code></a> context</a></h2>
<p>The i18n context has the following fields:</p>
<ul>
<li><a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html#structfield.language"><code>language</code></a>: A read-write signal with a pointer to the static current active language.</li>
<li><a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html#structfield.languages"><code>languages</code></a>: A pointer to a static list of pointers of the static available languages.</li>
<li><a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html#structfield.translations"><code>translations</code></a>: A signal to the vector of <a href="https://docs.rs/fluent-templates/latest/fluent_templates">fluent-templates</a> loaders that stores
the translations.</li>
</ul>
<h3 id="update-language"><a class="header" href="#update-language">Update language</a></h3>
<p>To update the language, use <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.Language.html#method.activate"><code>lang.activate</code></a> or the <code>set</code> method of <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html#structfield.language"><code>language</code></a>:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>lang.activate();

expect_i18n().language.set(lang);
<span class="boring">}</span></code></pre></pre>
<div id="admonition-nightly" class="admonition admonish-tip" role="note" aria-labelledby="admonition-nightly-title">
<div class="admonition-title">
<div id="admonition-nightly-title">
<p>Nightly</p>
</div>
<a class="admonition-anchor-link" href="basic-usage.html#admonition-nightly"></a>
</div>
<div>
<p>When <code>nightly</code> feature is enabled, can be updated passing a new language to the
context as a function with:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let i18n = leptos_fluent::i18n();
i18n(lang);
<span class="boring">}</span></code></pre></pre>
</div>
</div>
<h3 id="get-active-language"><a class="header" href="#get-active-language">Get active language</a></h3>
<p>To get the current active language, use <code>get</code> method of <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html#structfield.language"><code>language</code></a> field:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let i18n = leptos_fluent::i18n();
let lang = i18n.language.get();
<span class="boring">}</span></code></pre></pre>
<div id="admonition-nightly-1" class="admonition admonish-tip" role="note" aria-labelledby="admonition-nightly-1-title">
<div class="admonition-title">
<div id="admonition-nightly-1-title">
<p>Nightly</p>
</div>
<a class="admonition-anchor-link" href="basic-usage.html#admonition-nightly-1"></a>
</div>
<div>
<p>When <code>nightly</code> enabled, can get the active language with:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let i18n = leptos_fluent::i18n();
let lang = i18n();
<span class="boring">}</span></code></pre></pre>
</div>
</div>
<h3 id="get-available-languages"><a class="header" href="#get-available-languages">Get available languages</a></h3>
<p>To get the available languages, iterate over the <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html#structfield.languages"><code>languages</code></a> field:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>i18n.languages.iter()
<span class="boring">}</span></code></pre></pre>
<h3 id="check-if-a-language-is-active"><a class="header" href="#check-if-a-language-is-active">Check if a language is active</a></h3>
<p>To check if a language is the active one, use <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.Language.html#method.is_active"><code>is_active</code></a> method of a
<a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.Language.html"><code>leptos_fluent::Language</code></a> struct:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>lang.is_active()
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><!-- markdownlint-disable MD013 MD033 MD055 MD056 -->
<h1 id="strategies"><a class="header" href="#strategies">Strategies</a></h1>
<p>All the features of the framework are optional, following a declarative
"opt-in" configuration method.</p>
<ul>
<li><a href="strategies.html#loading-the-initial-language-of-the-user">Loading the initial language of the user</a></li>
<li><a href="strategies.html#csr---updating-the-language-on-the-client">CSR  | Updating the language on the client</a>
<ul>
<li><a href="strategies.html#system--desktop-applications">system | Desktop applications</a></li>
</ul>
</li>
<li><a href="strategies.html#csr---updating-the-language-from-initialization-on-the-client">CSR  | Updating the language from initialization on the client</a>
<ul>
<li><a href="strategies.html#csr--ssr">CSR + SSR</a></li>
<li><a href="strategies.html#system--desktop-applications-1">system | Desktop applications</a></li>
</ul>
</li>
<li><a href="strategies.html#csr---client-side-effects">CSR  | Client side effects</a></li>
<li><a href="strategies.html#csr--ssr---names">CSR + SSR  | Names</a>
<ul>
<li><a href="strategies.html#system--desktop-applications-2">system | Desktop applications</a></li>
</ul>
</li>
</ul>
<h2 id="loading-the-initial-language-of-the-user"><a class="header" href="#loading-the-initial-language-of-the-user">Loading the initial language of the user</a></h2>
<p>The initial language of the user can be set in different ways:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Strategy</th><th style="text-align: center">CSR</th><th style="text-align: center">SSR</th><th style="text-align: center">Desktop</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a></td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚ùå</td><td style="text-align: left"><code>initial_language_from_url_param</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">Cookie</a></td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚ùå</td><td style="text-align: left"><code>initial_language_from_cookie</code></td></tr>
<tr><td style="text-align: left"><a href="https://book.leptos.dev/server/25_server_functions.html">Server function</a>*</td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚ùå</td><td style="text-align: left"><code>initial_language_from_server_function</code></td></tr>
<tr><td style="text-align: left">Browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a></td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚ùå</td><td style="text-align: center">‚ùå</td><td style="text-align: left"><code>initial_language_from_localstorage</code></td></tr>
<tr><td style="text-align: left">Browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a></td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚ùå</td><td style="text-align: center">‚ùå</td><td style="text-align: left"><code>initial_language_from_navigator</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language"><code>Accept-Language</code></a> header</td><td style="text-align: center">‚ùå</td><td style="text-align: center">‚úÖ</td><td style="text-align: center">‚ùå</td><td style="text-align: left"><code>initial_language_from_accept_language_header</code></td></tr>
<tr><td style="text-align: left"><a href="https://github.com/i509VCB/current_locale">System language</a></td><td style="text-align: center">‚ùå</td><td style="text-align: center">‚ùå</td><td style="text-align: center">‚úÖ</td><td style="text-align: left"><code>initial_language_from_system</code></td></tr>
<tr><td style="text-align: left">Data file</td><td style="text-align: center">‚ùå</td><td style="text-align: center">‚ùå</td><td style="text-align: center">‚úÖ</td><td style="text-align: left"><code>initial_language_from_data_file</code></td></tr>
</tbody></table>
</div>
<p><sub style="position: relative; left: 110px"><sup>*Unreleased</sup></sub></p>
<p>All of them can be defined at the same time or just one of them at the same
time. The first language source found will be used and nexts discharged.
The order of precedence is:</p>
<ul>
<li><strong>SSR</strong>
<ol>
<li><a href="https://book.leptos.dev/server/25_server_functions.html">Server function</a></li>
<li><a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">Cookie</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language"><code>Accept-Language</code></a> header</li>
</ol>
</li>
<li><strong>CSR</strong>
<ol>
<li><a href="https://book.leptos.dev/server/25_server_functions.html">Server function</a></li>
<li><a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">Cookie</a></li>
<li>Browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a></li>
<li>Browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a></li>
</ol>
</li>
<li><strong>Desktop</strong> (<a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><code>system</code> feature</a>)
<ol>
<li>Data file</li>
<li><a href="https://github.com/i509VCB/current_locale">System language</a></li>
</ol>
</li>
</ul>
<h2 id="csr---updating-the-language-on-the-client"><a class="header" href="#csr---updating-the-language-on-the-client"><span style="opacity:.5">CSR </span> | Updating the language on the client</a></h2>
<p>When the user changes the language and <code>I18n::language.set</code> is called, the
framework can perform a side effect to update the language in the client. The
following strategies are available:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Strategy</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a></td><td style="text-align: left"><code>set_language_to_url_param</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">Cookie</a></td><td style="text-align: left"><code>set_language_to_cookie</code></td></tr>
<tr><td style="text-align: left">Browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a></td><td style="text-align: left"><code>set_language_to_localstorage</code></td></tr>
<tr><td style="text-align: left"><a href="https://book.leptos.dev/server/25_server_functions.html">Server function</a>*</td><td style="text-align: left"><code>set_language_to_server_function</code></td></tr>
</tbody></table>
</div>
<p><sub style="position: relative; left: 110px"><sup>*Unreleased</sup></sub></p>
<h3 id="system--desktop-applications"><a class="header" href="#system--desktop-applications"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | Desktop applications</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Strategy</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th></tr></thead><tbody>
<tr><td style="text-align: left">Data file</td><td style="text-align: left"><code>set_language_to_data_file</code></td></tr>
</tbody></table>
</div>
<h2 id="csr---updating-the-language-from-initialization-on-the-client"><a class="header" href="#csr---updating-the-language-from-initialization-on-the-client"><span style="opacity:.5">CSR </span> | Updating the language from initialization on the client</a></h2>
<p>When a language is loaded from initialization, the framework can perform a side
effect to persistently storage the language in the client. The following strategies
are available:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Strategy</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a> to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a></td><td style="text-align: left"><code>initial_language_from_url_param_to_localstorage</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a> to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">cookie</a></td><td style="text-align: left"><code>initial_language_from_url_param_to_cookie</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">Cookie</a> to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a></td><td style="text-align: left"><code>initial_language_from_cookie_to_localstorage</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">Local storage</a> to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">cookie</a></td><td style="text-align: left"><code>initial_language_from_localstorage_to_cookie</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">Local storage</a> to <a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>*</td><td style="text-align: left"><code>initial_language_from_localstorage_to_server_function</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a> to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a></td><td style="text-align: left"><code>initial_language_from_navigator_to_localstorage</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a> to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">cookie</a></td><td style="text-align: left"><code>initial_language_from_navigator_to_cookie</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a> to <a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>*</td><td style="text-align: left"><code>initial_language_from_navigator_to_server_function</code></td></tr>
</tbody></table>
</div>
<p><sub style="position: relative; left: 110px"><sup>*Unreleased</sup></sub></p>
<h3 id="csr--ssr"><a class="header" href="#csr--ssr"><span style="opacity:.5">CSR + SSR</span></a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Strategy</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a> to <a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>*</td><td style="text-align: left"><code>initial_language_from_url_param_to_server_function</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">Cookie</a> to <a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>*</td><td style="text-align: left"><code>initial_language_from_cookie_to_server_function</code></td></tr>
</tbody></table>
</div>
<p><sub style="position: relative; left: 110px"><sup>*Unreleased</sup></sub></p>
<h3 id="system--desktop-applications-1"><a class="header" href="#system--desktop-applications-1"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | Desktop applications</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Strategy</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://github.com/i509VCB/current_locale">System language</a> to data file</td><td style="text-align: left"><code>initial_language_from_system_to_data_file</code></td></tr>
</tbody></table>
</div>
<h2 id="csr---client-side-effects"><a class="header" href="#csr---client-side-effects"><span style="opacity:.5">CSR </span> | Client side effects</a></h2>
<p>When the user updates the language, the framework can perform side effects to
update the language in the client. The following side effects are available:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Side effect</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang"><code>&lt;html lang="..."&gt;</code></a> attribute</td><td style="text-align: left"><code>sync_html_tag_lang</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/dir"><code>&lt;html dir="..."&gt;</code></a> attribute</td><td style="text-align: left"><code>sync_html_tag_dir</code></td></tr>
</tbody></table>
</div>
<h2 id="csr--ssr---names"><a class="header" href="#csr--ssr---names"><span style="opacity:.5">CSR + SSR </span> | Names</a></h2>
<p>The names of the settings can be configured using the following parameters:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Strategy</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th><th style="text-align: left">Default value</th></tr></thead><tbody>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie">Cookie</a></td><td style="text-align: left"><code>cookie_name</code></td><td style="text-align: left"><code>"lf-lang"</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie#write_a_new_cookie">Cookie attributes</a></td><td style="text-align: left"><code>cookie_attrs</code></td><td style="text-align: left"><code>""</code></td></tr>
<tr><td style="text-align: left">Browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a></td><td style="text-align: left"><code>localstorage_key</code></td><td style="text-align: left"><code>"lang"</code></td></tr>
<tr><td style="text-align: left"><a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a></td><td style="text-align: left"><code>url_param</code></td><td style="text-align: left"><code>"lang"</code></td></tr>
</tbody></table>
</div>
<h3 id="system--desktop-applications-2"><a class="header" href="#system--desktop-applications-2"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | Desktop applications</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Strategy</th><th style="text-align: left"><a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a></th><th style="text-align: left">Default value</th></tr></thead><tbody>
<tr><td style="text-align: left">Data file</td><td style="text-align: left"><code>data_file_key</code></td><td style="text-align: left"><code>"leptos-fluent"</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="languages"><a class="header" href="#languages">Languages</a></h1>
<p><strong>leptos-fluent</strong> follows a default strategy to generate the languages
of the application. This strategy is based on the <em>locales/</em> directory.</p>
<p>Giving the next directory structure:</p>
<pre><code class="language-plaintext">.
‚îî‚îÄ‚îÄ üìÅ locales
    ‚îú‚îÄ‚îÄ üìÅ en
    ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ main.ftl
    ‚îî‚îÄ‚îÄ üìÅ es-ES
        ‚îî‚îÄ‚îÄ üìÑ main.ftl
</code></pre>
<p>The framework will generate something like the following languages array at
compile time:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let LANGUAGES = [
  leptos_fluent::Language {
    id: unic_langid::langid!("en"),
    name: "English",
    dir: leptos_fluent::WritingDirection::Ltr,
  },
  leptos_fluent::Language {
    id: unic_langid::langid!("es-ES"),
    name: "Espa√±ol (Espa√±a)",
    dir: leptos_fluent::WritingDirection::Ltr,
  },
]
<span class="boring">}</span></code></pre></pre>
<ul>
<li><code>en</code> is built with the name <code>"English"</code> because it's defined as an
<a href="https://en.wikipedia.org/wiki/ISO_639-1">ISO 639-1 code</a>, without a region code.</li>
<li><code>es-ES</code> is built with the name <code>"Espa√±ol (Espa√±a)"</code> because it's defined
as an <a href="https://en.wikipedia.org/wiki/ISO_639-1">ISO 639-1 code</a> and a region code.</li>
</ul>
<p>This enforces that an user will always be able to select their language in
their own language, and not in the current language of the application.</p>
<div id="admonition-order" class="admonition admonish-abstract" role="note" aria-labelledby="admonition-order-title">
<div class="admonition-title">
<div id="admonition-order-title">
<p>Order</p>
</div>
<a class="admonition-anchor-link" href="languages.html#admonition-order"></a>
</div>
<div>
<p>The order of the languages will be defined based on the alphabetical
order of their names, not their codes.</p>
</div>
</div>
<h2 id="the-languages-file"><a class="header" href="#the-languages-file">The languages file</a></h2>
<p>The languages array can be fully customized by defining a <code>languages</code> parameter
in the <a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a> macro pointing to a languages file. This file must
be relative to the <em>Cargo.toml</em> file.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    languages: "./locales/languages.json",
    // ...
}}
<span class="boring">}</span></code></pre></pre>
<pre><code class="language-json">[
  ["en", "English"],
  ["es-ES", "Spanish (Spain)", "auto"]
]
</code></pre>
<p>The languages file must expose an array of arrays with the structure:</p>
<pre><code class="language-json5">[
  // Code, Name,            "ltr"/"rtl"/"auto" (optional)
  ["code", "Language name", "Writing direction"],
]
</code></pre>
<div id="admonition-order-1" class="admonition admonish-abstract" role="note" aria-labelledby="admonition-order-1-title">
<div class="admonition-title">
<div id="admonition-order-1-title">
<p>Order</p>
</div>
<a class="admonition-anchor-link" href="languages.html#admonition-order-1"></a>
</div>
<div>
<p>The order of the languages in
<a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html#structfield.languages"><code>leptos_fluent::I18n::languages</code></a>
will be the same as in the file regardless of the alphabetical order
of the names.</p>
</div>
</div>
<p>The first in the languages file will used as the initial of the user when any
other initialization value is discovered. Use the same as the one configured
as <code>fallback_language</code> in <code>static_loader!</code>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>static_loader! {
    static TRANSLATIONS = {
        locales: "./locales",
        fallback_language: "en",
    };
}

#[component]
pub fn App() -&gt; impl IntoView {
    leptos_fluent! {{
        translations: [TRANSLATIONS],
        languages: "./locales/languages.json5",
    }};
}
<span class="boring">}</span></code></pre></pre>
<pre><code class="language-json5">// ./locales/languages.json5
[
  ["en", "English"],
  ["es-ES", "Espa√±ol (Espa√±a)"],
]
</code></pre>
<h3 id="file-format"><a class="header" href="#file-format">File format</a></h3>
<p>By default, the <code>json</code> feature is enabled, which only allows to set the
languages file in JSON format. To use other formats, disable the feature
and enable another.</p>
<pre><code class="language-toml">[dependencies]
leptos-fluent = { version = "*", default-features = false, features = ["json5"] }
</code></pre>
<p>Available features for languages file formats are:</p>
<ul>
<li><code>json</code>: JSON (default)</li>
<li><code>yaml</code>: YAML</li>
<li><code>json5</code>: JSON5</li>
</ul>
<h2 id="tracking-locales-files-with-cargo-leptos"><a class="header" href="#tracking-locales-files-with-cargo-leptos">Tracking locales files with <a href="https://github.com/leptos-rs/cargo-leptos"><code>cargo leptos</code></a></a></h2>
<p>Using <a href="https://github.com/leptos-rs/cargo-leptos"><code>cargo leptos</code></a> watch of the <em>locales/</em> folder for reloads:</p>
<pre><code class="language-toml"># Relative to Cargo.toml file
[package.metadata.leptos]
watch-additional-files = ["locales"]
</code></pre>
<p>When inside a workspace, use the full path to the folder from the
workspace <em>Cargo.toml</em> file:</p>
<pre><code class="language-toml"> # Relative to workspace Cargo.toml file
[package.metadata.leptos]
watch-additional-files = ["examples/csr/locales"]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="checking-translations"><a class="header" href="#checking-translations">Checking translations</a></h1>
<p>To check that the translations of the app are correct at compile time,
set the <code>check_translations</code> parameter in the <a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a> macro to
a glob pattern that matches the Rust files that you want to check.</p>
<p>The pattern must be relative to the location of the <em>Cargo.toml</em> file.</p>
<p>For single crate projects, it would be something like:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    check_translations: "./src/**/*.rs",
}}
<span class="boring">}</span></code></pre></pre>
<p>For workspace projects, it could be something like:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    check_translations: "../{app,components}/src/**/*.rs",
}}
<span class="boring">}</span></code></pre></pre>
<h2 id="translations-error-messages"><a class="header" href="#translations-error-messages">Translations error messages</a></h2>
<!-- markdownlint-disable MD013 -->
<p>When the translations stop being synchronized, you will see errors like:</p>
<pre><code class="language-text">error: Translations check failed:
       - Message "select-a-language" defined at `move_tr!("select-a-language")` macro call in src/lib.rs not found in files for locale "en".
       - Message "select-a-lang" of locale "en" not found in any `tr!` or `move_tr!` macro calls.
  --&gt; examples/csr-complete/src/lib.rs:18:29
   |
18 |         check_translations: "./src/**/*.rs",
   |                             ^^^^^^^^^^^^^^^
</code></pre>
<p>If placeable are missing in the translations, you will see errors like:</p>
<pre><code class="language-text">error: Translations check failed:
       - Variable "dir" defined at `move_tr!("html-tag-dir-is", { ... })` macro call in src/lib.rs not found in message "html-tag-dir-is" of locale "en".
       - Variable "name" defined in message "html-tag-dir-is" of locale "en" not found in arguments of `move_tr!("html-tag-dir-is", { ... })` macro call at file src/lib.rs.
  --&gt; examples/csr-complete/src/lib.rs:18:29
   |
18 |         check_translations: "./src/**/*.rs",
   |                             ^^^^^^^^^^^^^^^
</code></pre>
<!-- markdownlint-enable MD013 -->
<h2 id="why-glob-patterns-to-rust-files"><a class="header" href="#why-glob-patterns-to-rust-files">Why glob patterns to Rust files?</a></h2>
<p><strong>leptos-fluent</strong> provides a <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html"><code>I18n</code></a> context to Leptos when
the macro <a href="https://mondeja.github.io/leptos-fluent/leptos_fluent.html"><code>leptos_fluent!</code></a> is called. So multiple instances of a context
with different localization files and strategies can be initialized in
different component trees. This is useful, for example, in a multi page app.</p>
<p>The mechanism of translations checking needs to know where reside the calls to
<a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.tr.html"><code>tr!</code></a> and <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.move_tr.html"><code>move_tr!</code></a> macros to extract the messages that need to be checked.
This is performed by parsing the source code looking for these macros
invocations.</p>
<div id="admonition-why-macros" class="admonition admonish-note" role="note" aria-labelledby="admonition-why-macros-title">
<div class="admonition-title">
<div id="admonition-why-macros-title">
<p>Why macros</p>
</div>
<a class="admonition-anchor-link" href="checking-translations.html#admonition-why-macros"></a>
</div>
<div>
<p><strong>leptos-fluent</strong> doesn't provide ways to translate directly using
<a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html"><code>I18n</code></a> context methods, as it would be impossible to extract
the translations at compile time.</p>
</div>
</div>
<p>The only limitation for checking translations with glob patterns is that the
<a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.tr.html"><code>tr!</code></a> and <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/macro.move_tr.html"><code>move_tr!</code></a> macros that consume each context must be in
different file trees, but this enforces anyway a good practice of file-level
separation of contexts in the codebase.</p>
<div style="break-before: page; page-break-before: always;"></div><!-- markdownlint-disable MD001 -->
<h1 id="faqs"><a class="header" href="#faqs">FAQs</a></h1>
<ul>
<li><a href="faqs.html#how-to-get-languageidentifier-if-not-installed">How to get <code>LanguageIdentifier</code> if not installed?</a></li>
<li><a href="faqs.html#how-to-get-the-i18n-context-at-initialization">How to get the i18n context at initialization?</a></li>
<li><a href="faqs.html#custom-cookie-attributes-are-invalid">Custom cookie attributes are invalid</a></li>
<li><a href="faqs.html#how-to-get-the-fallback-language">How to get the fallback language</a></li>
<li><a href="faqs.html#why-examples-dont-use-for-component">Why examples don't use <code>&lt;For/&gt;</code> component?</a></li>
<li><a href="faqs.html#how-to-manage-translations-on-server-actions">How to manage translations on server actions</a></li>
<li><a href="faqs.html#how-to-change-html-attributes-on-ssr">How to change <code>&lt;html&gt;</code> attributes on SSR</a></li>
<li><a href="faqs.html#how-to-get-values-of-leptos_fluent-macro-at-runtime">How to get values of <code>leptos_fluent!</code> macro at runtime?</a></li>
<li><a href="faqs.html#different-configuration-conditional-checks">Different configuration conditional checks</a></li>
</ul>
<h3 id="how-to-get-languageidentifier-if-not-installed"><a class="header" href="#how-to-get-languageidentifier-if-not-installed">How to get <a href="https://docs.rs/unic-langid/latest/unic_langid/struct.LanguageIdentifier.html"><code>LanguageIdentifier</code></a> if not installed?</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use fluent_templates::LanguageIdentifier;
<span class="boring">}</span></code></pre></pre>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="faqs.html#admonition-tip"></a>
</div>
<div>
<p><code>fluent-templates</code> also depends externally on
<a href="https://docs.rs/fluent-bundle/latest/fluent_bundle/"><code>fluent-bundle</code></a>
whichs provides utilities for parsing the Fluent syntax.</p>
</div>
</div>
<h3 id="how-to-get-the-i18n-context-at-initialization"><a class="header" href="#how-to-get-the-i18n-context-at-initialization">How to get the <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html">i18n context</a> at initialization?</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use leptos_fluent::leptos_fluent;

let i18n = leptos_fluent! {{
    // ...
}};

leptos::logging::log!("i18n context: {i18n:?}");
<span class="boring">}</span></code></pre></pre>
<h3 id="custom-cookie-attributes-are-invalid"><a class="header" href="#custom-cookie-attributes-are-invalid">Custom <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie#write_a_new_cookie">cookie attributes</a> are invalid</a></h3>
<p>Use an expression to set the cookie attributes and will not be validated.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let attrs = "SameSite=Strict; MyCustomAttr=MyCustomValue;";
leptos_fluent! {{
    cookie_attrs: attrs,
    // ...
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="how-to-get-the-fallback-language"><a class="header" href="#how-to-get-the-fallback-language">How to get the fallback language</a></h3>
<p>From fluent-templates <code>v0.9.5</code> onwards can be obtained from your translations.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let fallback_language = expect_i18n().translations.get()[0].fallback();
<span class="boring">}</span></code></pre></pre>
<h3 id="why-examples-dont-use-for-component"><a class="header" href="#why-examples-dont-use-for-component">Why examples don't use <a href="https://docs.rs/leptos/latest/leptos/fn.For.html"><code>&lt;For/&gt;</code></a> component?</a></h3>
<div id="admonition-bug" class="admonition admonish-bug" role="note" aria-labelledby="admonition-bug-title">
<div class="admonition-title">
<div id="admonition-bug-title">
<p>Bug</p>
</div>
<a class="admonition-anchor-link" href="faqs.html#admonition-bug"></a>
</div>
<div>
<p>There are some cases in which the <a href="https://docs.rs/leptos/latest/leptos/fn.For.html"><code>&lt;For/&gt;</code></a> component is not reproducible between
SSR and hydrate modes leading to different renders, so decided to use a
simple vector to not bring confusion to main examples.</p>
</div>
</div>
<p>In any case, the <a href="https://docs.rs/leptos/latest/leptos/fn.For.html"><code>&lt;For/&gt;</code></a> component is secure on CSR contexts and
<a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.Language.html"><code>leptos_fluent::Language</code></a>s implement <code>Hash</code> and <code>Eq</code> traits to be
able to be passed directly to <code>key</code>s properties trigerring reactivity
depending on the current active language.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use leptos_fluent::{i18n, Language};

leptos::logging::warn!("[WARNING]: Not secure on SSR");
view! {
    &lt;p&gt;{move_tr!("select-a-language")}&lt;/p&gt;
    &lt;For
        each=move || i18n().languages
        key=|lang| *lang
        children=move |lang| render_language(lang)
    /&gt;
}

fn render_language(lang: &amp;'static Language) -&gt; impl IntoView { ... }
<span class="boring">}</span></code></pre></pre>
<h3 id="how-to-manage-translations-on-server-actions"><a class="header" href="#how-to-manage-translations-on-server-actions">How to manage translations on server actions</a></h3>
<p>The translations reside on the client side, so the <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/struct.I18n.html"><code>I18n</code></a> can not be
accessed as context on server actions. Pass the translations as values
if the bandwidth is not a problem or use your own statics on server side.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use leptos::*;
use leptos_fluent::{tr, Language};

/// Server action showing client-side translated message on console
#[server(ShowHelloWorld, "/api")]
pub async fn show_hello_world(
    translated_hello_world: String,
    language: String,
) -&gt; Result&lt;(), ServerFnError&gt; {
    println!("{} ({})", translated_hello_world, language);
    Ok(())
}

fn render_language(lang: &amp;'static Language) -&gt; impl IntoView {
    // Call on click to server action with a client-side translated
    // "hello-world" message
    let on_click = move |_| {
        lang.activate();
        spawn_local(async {
            _ = show_hello_world(
                tr!("hello-world"),
                lang.name.to_string(),
            ).await;
        });
    };

    view! {
        &lt;div&gt;
            &lt;label for=lang&gt;{lang.name}&lt;/label&gt;
            &lt;input
                id=lang
                name="language"
                value=lang
                checked=lang.is_active()
                on:click=on_click
                type="radio"
            /&gt;
        &lt;/div&gt;
    }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="how-to-change-html-attributes-on-ssr"><a class="header" href="#how-to-change-html-attributes-on-ssr">How to change <code>&lt;html&gt;</code> attributes on SSR</a></h3>
<p>Use the component <a href="https://docs.rs/leptos-fluent/latest/leptos_fluent/fn.SsrHtmlTag.html"><code>leptos_fluent::SsrHtmlTag</code></a>:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use leptos::*;
use leptos_fluent::{leptos_fluent, SsrHtmlTag};

#[component]
pub fn App() -&gt; impl IntoView {
    leptos_fluent! {{
        // ...
    }};

    view! {
        &lt;SsrHtmlTag/&gt;
        &lt;LanguageSelector/&gt;
    }
}

#[component]
fn LanguageSelector() -&gt; impl IntoView { ... }
<span class="boring">}</span></code></pre></pre>
<h3 id="how-to-get-values-of-leptos_fluent-macro-at-runtime"><a class="header" href="#how-to-get-values-of-leptos_fluent-macro-at-runtime">How to get values of <code>leptos_fluent!</code> macro at runtime?</a></h3>
<p>Use <code>provide_meta_context</code> at the macro initialization and get them
with the method <code>I18n::meta</code>:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let i18n = leptos_fluent! {{
    // ...
    provide_meta_context: true,
}};

println!("Macro parameters: {:?}", i18n.meta().unwrap());
<span class="boring">}</span></code></pre></pre>
<h3 id="different-configuration-conditional-checks"><a class="header" href="#different-configuration-conditional-checks">Different <a href="https://doc.rust-lang.org/rust-by-example/attribute/cfg.html">configuration conditional checks</a></a></h3>
<p><code>leptos_fluent!</code> macro does not allows to set the same macro parameter
multiple times with different <a href="https://doc.rust-lang.org/rust-by-example/attribute/cfg.html">configuration conditional checks</a>, but
the next approach can be used instead:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(feature = "ssr")]
let param = "ssr-lang";
#[cfg(feature = "hydrate")]
let param = "hydrate-lang";
#[cfg(debug_assertions)]
let param = "debug-lang";

leptos_fluent! {{
    // ...
    #[cfg(any(feature = "ssr", feature = "hydrate", debug_assertions))]
    url_param: param,
    #[cfg(debug_assertions)]
    initial_language_from_url_param: true,
}}
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><!-- markdownlint-disable MD033 MD038 -->
<h1 id="leptos_fluent"><a class="header" href="#leptos_fluent"><code>leptos_fluent!</code></a></h1>
<p>The <code>leptos_fluent!</code> macro is used to load the translations and set the current
locale. It is used in the root component of the application.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    locales: "./locales",
    translations: [TRANSLATIONS],
}}
<span class="boring">}</span></code></pre></pre>
<ul>
<li><a href="leptos_fluent.html#common-configurations">Common configurations</a>
<ul>
<li><a href="leptos_fluent.html#csr---local-storage-from-navigator">CSR  | Local storage from navigator</a></li>
<li><a href="leptos_fluent.html#csr--ssr---cookie-from-navigator-and-header">CSR + SSR  | Cookie from navigator and header</a></li>
<li><a href="leptos_fluent.html#system--data-files-on-desktop-applications">system | Data files on Desktop applications</a></li>
</ul>
</li>
<li><a href="leptos_fluent.html#processing-steps">Processing steps</a>
<ul>
<li><a href="leptos_fluent.html#order">Order</a></li>
<li><a href="leptos_fluent.html#sources-and-targets">Sources and targets</a></li>
<li><a href="leptos_fluent.html#commented-example">Commented example</a></li>
</ul>
</li>
<li><a href="leptos_fluent.html#parameters">Parameters</a>
<ul>
<li><a href="leptos_fluent.html#translations"><code>translations</code></a></li>
<li><a href="leptos_fluent.html#locales"><code>locales</code></a></li>
<li><a href="leptos_fluent.html#core_locales"><code>core_locales</code></a></li>
<li><a href="leptos_fluent.html#languages"><code>languages</code></a></li>
<li><a href="leptos_fluent.html#check_translations"><code>check_translations</code></a></li>
<li><a href="leptos_fluent.html#csr---sync_html_tag_lang">CSR  | <code>sync_html_tag_lang</code></a></li>
<li><a href="leptos_fluent.html#csr---sync_html_tag_dir">CSR  | <code>sync_html_tag_dir</code></a></li>
<li><a href="leptos_fluent.html#csr--ssr---url_param-lang">CSR + SSR  | <code>url_param: </code>"lang"</a></li>
<li><a href="leptos_fluent.html#csr--ssr---initial_language_from_url_param">CSR + SSR  | <code>initial_language_from_url_param</code></a></li>
<li><a href="leptos_fluent.html#csr---initial_language_from_url_param_to_localstorage">CSR  | <code>initial_language_from_url_param_to_localstorage</code></a></li>
<li><a href="leptos_fluent.html#csr---initial_language_from_url_param_to_cookie">CSR  | <code>initial_language_from_url_param_to_cookie</code></a></li>
<li><a href="leptos_fluent.html#csr---set_language_to_url_param">CSR  | <code>set_language_to_url_param</code></a></li>
<li><a href="leptos_fluent.html#csr---localstorage_key-lang">CSR  | <code>localstorage_key: </code>"lang"</a></li>
<li><a href="leptos_fluent.html#csr---initial_language_from_localstorage">CSR  | <code>initial_language_from_localstorage</code></a></li>
<li><a href="leptos_fluent.html#csr---initial_language_from_localstorage_to_cookie">CSR  | <code>initial_language_from_localstorage_to_cookie</code></a></li>
<li><a href="leptos_fluent.html#csr---set_language_to_localstorage">CSR  | <code>set_language_to_localstorage</code></a></li>
<li><a href="leptos_fluent.html#csr---initial_language_from_navigator">CSR  | <code>initial_language_from_navigator</code></a></li>
<li><a href="leptos_fluent.html#csr---initial_language_from_navigator_to_localstorage">CSR  | <code>initial_language_from_navigator_to_localstorage</code></a></li>
<li><a href="leptos_fluent.html#csr---initial_language_from_navigator_to_cookie">CSR  | <code>initial_language_from_navigator_to_cookie</code></a></li>
<li><a href="leptos_fluent.html#ssr---initial_language_from_accept_language_header">SSR  | <code>initial_language_from_accept_language_header</code></a></li>
<li><a href="leptos_fluent.html#csr--ssr---cookie_name-lf-lang">CSR + SSR  | <code>cookie_name: </code>"lf-lang"</a></li>
<li><a href="leptos_fluent.html#csr---cookie_attrs-">CSR  | <code>cookie_attrs: </code>""</a></li>
<li><a href="leptos_fluent.html#csr--ssr---initial_language_from_cookie">CSR + SSR  | <code>initial_language_from_cookie</code></a></li>
<li><a href="leptos_fluent.html#csr---initial_language_from_cookie_to_localstorage">CSR  | <code>initial_language_from_cookie_to_localstorage</code></a></li>
<li><a href="leptos_fluent.html#csr---set_language_to_cookie">CSR  | <code>set_language_to_cookie</code></a></li>
<li><a href="leptos_fluent.html#system--initial_language_from_system">system | <code>initial_language_from_system</code></a></li>
<li><a href="leptos_fluent.html#system--initial_language_from_data_file">system | <code>initial_language_from_data_file</code></a></li>
<li><a href="leptos_fluent.html#system--initial_language_from_system_to_data_file">system | <code>initial_language_from_system_to_data_file</code></a></li>
<li><a href="leptos_fluent.html#system--set_language_to_data_file">system | <code>set_language_to_data_file</code></a></li>
<li><a href="leptos_fluent.html#system--data_file_key-leptos-fluent">system | <code>data_file_key: </code>"leptos-fluent"</a></li>
<li><a href="leptos_fluent.html#provide_meta_context"><code>provide_meta_context</code></a></li>
</ul>
</li>
<li><a href="leptos_fluent.html#unreleased">Unreleased</a>
<ul>
<li><a href="leptos_fluent.html#initial_language_from_server_function"><code>initial_language_from_server_function</code></a></li>
<li><a href="leptos_fluent.html#set_language_to_server_function"><code>set_language_to_server_function</code></a></li>
<li><a href="leptos_fluent.html#initial_language_from_localstorage_to_server_function"><code>initial_language_from_localstorage_to_server_function</code></a></li>
<li><a href="leptos_fluent.html#initial_language_from_cookie_to_server_function"><code>initial_language_from_cookie_to_server_function</code></a></li>
<li><a href="leptos_fluent.html#initial_language_from_navigator_to_server_function"><code>initial_language_from_navigator_to_server_function</code></a></li>
<li><a href="leptos_fluent.html#initial_language_from_url_param_to_server_function"><code>initial_language_from_url_param_to_server_function</code></a></li>
</ul>
</li>
</ul>
<h2 id="common-configurations"><a class="header" href="#common-configurations">Common configurations</a></h2>
<h3 id="csr---local-storage-from-navigator"><a class="header" href="#csr---local-storage-from-navigator"><span style="opacity:.5">CSR </span> | Local storage from navigator</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    locales: "./locales",
    translations: [TRANSLATIONS],

    set_language_to_localstorage: true,
    initial_language_from_localstorage: true,
    initial_language_from_navigator: true,
    initial_language_from_navigator_to_localstorage: true,
    initial_language_from_url_param: true,
    initial_language_from_url_param_to_localstorage: true,
    localstorage_key: "lang",
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr--ssr---cookie-from-navigator-and-header"><a class="header" href="#csr--ssr---cookie-from-navigator-and-header"><span style="opacity:.5">CSR + SSR </span> | Cookie from navigator and header</a></h3>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    locales: "./locales",
    translations: [TRANSLATIONS],

    set_language_to_cookie: true,
    initial_language_from_cookie: true,
    initial_language_from_navigator: true,
    initial_language_from_navigator_to_cookie: true,
    initial_language_from_url_param: true,
    initial_language_from_url_param_to_cookie: true,
    initial_language_from_accept_language_header: true,
    cookie_name: "lf-lang",
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="system--data-files-on-desktop-applications"><a class="header" href="#system--data-files-on-desktop-applications"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | Data files on Desktop applications</a></h3>
<!-- markdownlint-enable MD013 -->
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    locales: "./locales",
    translations: [TRANSLATIONS],

    initial_language_from_system: true,
    initial_language_from_system_to_data_file: true,
    initial_language_from_data_file: true,
    set_language_to_data_file: true,
    data_file_key: "system-language-example",
}}
<span class="boring">}</span></code></pre></pre>
<h2 id="processing-steps"><a class="header" href="#processing-steps">Processing steps</a></h2>
<p>There is four kind of parameters for all the possible configurations and are
executed in the next order:</p>
<h3 id="order"><a class="header" href="#order">Order</a></h3>
<ol>
<li>Get the initial languaje from a source or target: <code>initial_language_from_*</code></li>
<li>Obtain the initial language and set to a target: <code>initial_language_from_*_to_*</code></li>
<li>Synchronize the current language with a target: <code>set_language_to_*</code></li>
<li>The name of a source or a target: <code>cookie_name</code>, <code>localstorage_key</code>, <code>navigator</code>...</li>
</ol>
<h3 id="sources-and-targets"><a class="header" href="#sources-and-targets">Sources and targets</a></h3>
<p>Sources are read-only and targets are read-write.</p>
<ul>
<li>Sources: <code>navigator</code>, <code>system</code>, <code>accept_language_header</code></li>
<li>Targets: <code>cookie_name</code>, <code>localstorage_key</code>, <code>url_param</code>, <code>data_file</code></li>
</ul>
<h3 id="commented-example"><a class="header" href="#commented-example">Commented example</a></h3>
<div id="admonition-example" class="admonition admonish-example" role="note" aria-labelledby="admonition-example-title">
<div class="admonition-title">
<div id="admonition-example-title">
<p>Example</p>
</div>
<a class="admonition-anchor-link" href="leptos_fluent.html#admonition-example"></a>
</div>
<div>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ..
    // Get the initial language from the source operative system
    initial_language_from_system: true,
    // and set to the target file.
    initial_language_from_system_to_data_file: true,
    // If a target data file exists, get the initial language from it.
    initial_language_from_data_file: true,
    // When the language is updated, set it to the file.
    set_language_to_data_file: true,
    // Unique file name to set the language for this app:
    data_file_key: "system-language-example",
}};
<span class="boring">}</span></code></pre></pre>
</div>
</div>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<h3 id="translations"><a class="header" href="#translations"><code>translations</code></a></h3>
<p>Set the translations to be used in the application. It must be a reference
to a static array of <a href="https://docs.rs/fluent-templates/latest/fluent_templates/macro.static_loader.html"><code>fluent_templates::static_loader!</code></a> instances.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use fluent_templates::static_loader;
use leptos_fluent::leptos_fluent;

static_loader! {
    pub static TRANSLATIONS = {
        locales: "./locales",
        fallback_language: "en",
    };
}

leptos_fluent! {{
    locales: "./locales",
    translations: [TRANSLATIONS],
    // ^^^^^^^^^^^^^^^^^^^^^^^^^
}}
<span class="boring">}</span></code></pre></pre>
<p>Must be the same identifier used in the <a href="https://docs.rs/fluent-templates/latest/fluent_templates/macro.static_loader.html"><code>fluent_templates::static_loader!</code></a>
macro, which returns an <a href="https://docs.rs/once_cell/latest/once_cell/sync/struct.Lazy.html"><code>once_cell:sync::Lazy</code></a> variable.</p>
<h3 id="locales"><a class="header" href="#locales"><code>locales</code></a></h3>
<p>Set the path to the locales directory which contain the Fluent
files for the translations. Must be relative to the <em>Cargo.toml</em> file, the same
used in the <a href="https://docs.rs/fluent-templates/latest/fluent_templates/macro.static_loader.html"><code>fluent_templates::static_loader!</code></a> macro.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    locales: "./locales",
    // ^^^^^^^^^^^^^^^^^
    translations: [TRANSLATIONS],
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="core_locales"><a class="header" href="#core_locales"><code>core_locales</code></a></h3>
<p>Common locale resources that are shared across all locales.
Must be relative to the <em>Cargo.toml</em> file, the same
used in the <a href="https://docs.rs/fluent-templates/latest/fluent_templates/macro.static_loader.html"><code>fluent_templates::static_loader!</code></a> macro:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>static_loader! {
    pub static TRANSLATIONS = {
        locales: "./locales",
        core_locales: "./locales/core",
    };
}

leptos_fluent! {{
    locales: "./locales",
    core_locales: "./locales/core",
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    translations: [TRANSLATIONS],
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="languages-1"><a class="header" href="#languages-1"><code>languages</code></a></h3>
<p>Path to a file containing the list of languages supported by the application.
Must be relative to the <em>Cargo.toml</em> file.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    locales: "./locales",
    languages: "./locales/languages.json",
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    translations: [TRANSLATIONS],
}}
<span class="boring">}</span></code></pre></pre>
<div id="admonition-tip" class="admonition admonish-tip" role="note" aria-labelledby="admonition-tip-title">
<div class="admonition-title">
<div id="admonition-tip-title">
<p>Tip</p>
</div>
<a class="admonition-anchor-link" href="leptos_fluent.html#admonition-tip"></a>
</div>
<div>
<p>See <a href="https://mondeja.github.io/leptos-fluent/languages.html"><strong>4. Languages</strong></a></p>
</div>
</div>
<p>The languages file should contain an array of arrays where each inner array
contains a language identifier and a language name, respectively, at least.</p>
<p>The language identifier should be a valid language tag, such as <code>en-US</code>, <code>en</code>,
<code>es-ES</code>, etc. By default, the languages file should be a JSON with a <code>.json</code>
extension because the <code>json</code> feature is enabled. For example:</p>
<pre><code class="language-json">[
  ["en-US", "English (United States)"],
  ["es-ES", "Espa√±ol (Espa√±a)"]
]
</code></pre>
<p>Set <code>default-features = false</code> and enable the <code>yaml</code> or the <code>json5</code> feature
to use a YAML or JSON5 files. For example:</p>
<pre><code class="language-yaml"># locales/languages.yaml
- - en-US
  - English (United States)
- - es-ES
  - Espa√±ol (Espa√±a)
</code></pre>
<pre><code class="language-json5">// locales/languages.json5
[
  ["en-US", "English (United States)"],
  ["es-ES", "Espa√±ol (Espa√±a)"],
]
</code></pre>
<p>Define a third element in the inner array with the direction of the language,
to use it in the <a href="https://developer.mozilla.org/es/docs/Web/HTML/Global_attributes/dir"><code>&lt;html dir="..."&gt;</code> attribute</a> (see <a href="leptos_fluent.html#csr---sync_html_tag_dir"><code>sync_html_tag_dir</code></a>).
For example:</p>
<pre><code class="language-json">[
  ["en-US", "English (United States)", "ltr"],
  ["es-ES", "Espa√±ol (Espa√±a)", "auto"],
  ["ar", "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©", "rtl"],
  ["it", "Italiano"]
]
</code></pre>
<h3 id="check_translations"><a class="header" href="#check_translations"><code>check_translations</code></a></h3>
<p>Check the translations at compile time. It is useful to ensure that all
translations are correct and that there are no missing translations.</p>
<p>Must be a <a href="https://docs.rs/globwalk/latest/globwalk/fn.glob.html">glob</a> relative to the <em>Cargo.toml</em> file.</p>
<ul>
<li>
<p>For single crate projects:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    locales: "./locales",
    translations: [TRANSLATIONS],
    check_translations: "./src/**/*.rs",
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
}}
<span class="boring">}</span></code></pre></pre>
</li>
<li>
<p>For workspace projects:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    locales: "./locales",
    translations: [TRANSLATIONS],
    check_translations: "../{app,components}/src/**/*.rs",
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
}}
<span class="boring">}</span></code></pre></pre>
</li>
</ul>
<h3 id="csr---sync_html_tag_lang"><a class="header" href="#csr---sync_html_tag_lang"><span style="opacity:.5">CSR </span> | <code>sync_html_tag_lang</code></a></h3>
<p>Synchronize the global <a href="https://developer.mozilla.org/es/docs/Web/HTML/Global_attributes/lang"><code>&lt;html lang="..."&gt;</code> attribute</a> with current language
using <a href="https://docs.rs/leptos/latest/leptos/fn.create_effect.html"><code>leptos::create_effect</code></a>. Can be a literal boolean or an expression
that will be evaluated at runtime.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    sync_html_tag_lang: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---sync_html_tag_dir"><a class="header" href="#csr---sync_html_tag_dir"><span style="opacity:.5">CSR </span> | <code>sync_html_tag_dir</code></a></h3>
<p>Synchronize the global <a href="https://developer.mozilla.org/es/docs/Web/HTML/Global_attributes/dir"><code>&lt;html dir="..."&gt;</code> attribute</a> with current language
using <a href="https://docs.rs/leptos/latest/leptos/fn.create_effect.html"><code>leptos::create_effect</code></a>.</p>
<p>Can be a literal boolean or an expression that will be evaluated at runtime.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    sync_html_tag_dir: true,
}}
<span class="boring">}</span></code></pre></pre>
<p>For custom languages from a languages file, specify a third element in
the inner array with the direction of the language, which can be <code>"auto"</code>,
<code>"ltr"</code>, or <code>"rtl"</code>. Discovered languages will be defined depending on the
language.</p>
<div id="admonition-example-1" class="admonition admonish-example" role="note" aria-labelledby="admonition-example-1-title">
<div class="admonition-title">
<div id="admonition-example-1-title">
<p>Example</p>
</div>
<a class="admonition-anchor-link" href="leptos_fluent.html#admonition-example-1"></a>
</div>
<div>
<ul>
<li>Arabic (<code>ar</code>): <code>"rtl"</code></li>
<li>English (<code>en</code>): <code>"ltr"</code></li>
<li>Japanese (<code>ja</code>): <code>"auto"</code></li>
</ul>
</div>
</div>
<!-- markdownlint-disable MD013 -->
<h3 id="csr--ssr---url_param-lang"><a class="header" href="#csr--ssr---url_param-lang"><span style="opacity:.5">CSR + SSR </span> | <code>url_param: </code><span style="color: #b5bd68;font-size: 16px; opacity:.9;">"lang"</span></a></h3>
<!-- markdownlint-enable MD013 -->
<p>Name of <a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a> used to manage the current language.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    url_param: "lang",
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr--ssr---initial_language_from_url_param"><a class="header" href="#csr--ssr---initial_language_from_url_param"><span style="opacity:.5">CSR + SSR </span> | <code>initial_language_from_url_param</code></a></h3>
<p>Set initial language from <a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_url_param: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---initial_language_from_url_param_to_localstorage"><a class="header" href="#csr---initial_language_from_url_param_to_localstorage"><span style="opacity:.5">CSR </span> | <code>initial_language_from_url_param_to_localstorage</code></a></h3>
<p>Get initial language from <a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a> and save it to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_url_param_to_localstorage: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---initial_language_from_url_param_to_cookie"><a class="header" href="#csr---initial_language_from_url_param_to_cookie"><span style="opacity:.5">CSR </span> | <code>initial_language_from_url_param_to_cookie</code></a></h3>
<p>Get initial language from <a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a> and save it to a <a href="https://developer.mozilla.org/docs/Web/HTTP/Cookies">cookie</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_url_param_to_cookie: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---set_language_to_url_param"><a class="header" href="#csr---set_language_to_url_param"><span style="opacity:.5">CSR </span> | <code>set_language_to_url_param</code></a></h3>
<p>Synchronize current language with <a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    set_language_to_url_param: true,
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="csr---localstorage_key-lang"><a class="header" href="#csr---localstorage_key-lang"><span style="opacity:.5">CSR </span> | <code>localstorage_key: </code><span style="color: #b5bd68;font-size: 16px; opacity:.9;">"lang"</span></a></h3>
<!-- markdownlint-enable MD013 -->
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">Local storage</a> key to manage the current language.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    localstorage_key: "lang",
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---initial_language_from_localstorage"><a class="header" href="#csr---initial_language_from_localstorage"><span style="opacity:.5">CSR </span> | <code>initial_language_from_localstorage</code></a></h3>
<p>Get initial language from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_localstorage: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---initial_language_from_localstorage_to_cookie"><a class="header" href="#csr---initial_language_from_localstorage_to_cookie"><span style="opacity:.5">CSR </span> | <code>initial_language_from_localstorage_to_cookie</code></a></h3>
<p>Get initial language from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a> and save it to a <a href="https://developer.mozilla.org/docs/Web/HTTP/Cookies">cookie</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_localstorage_to_cookie: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---set_language_to_localstorage"><a class="header" href="#csr---set_language_to_localstorage"><span style="opacity:.5">CSR </span> | <code>set_language_to_localstorage</code></a></h3>
<p>Set the current language to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    set_language_to_localstorage: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---initial_language_from_navigator"><a class="header" href="#csr---initial_language_from_navigator"><span style="opacity:.5">CSR </span> | <code>initial_language_from_navigator</code></a></h3>
<p>Get the initial language from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_navigator: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---initial_language_from_navigator_to_localstorage"><a class="header" href="#csr---initial_language_from_navigator_to_localstorage"><span style="opacity:.5">CSR </span> | <code>initial_language_from_navigator_to_localstorage</code></a></h3>
<p>Get the initial language from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a> and save it in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_navigator_to_localstorage: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---initial_language_from_navigator_to_cookie"><a class="header" href="#csr---initial_language_from_navigator_to_cookie"><span style="opacity:.5">CSR </span> | <code>initial_language_from_navigator_to_cookie</code></a></h3>
<p>Get the initial language from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a> and save it in a <a href="https://developer.mozilla.org/docs/Web/HTTP/Cookies">cookie</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_navigator_to_cookie: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="ssr---initial_language_from_accept_language_header"><a class="header" href="#ssr---initial_language_from_accept_language_header"><span style="opacity:.5">SSR </span> | <code>initial_language_from_accept_language_header</code></a></h3>
<p>Get the initial language from the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language"><code>Accept-Language</code></a> header.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_accept_language_header: true,
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="csr--ssr---cookie_name-lf-lang"><a class="header" href="#csr--ssr---cookie_name-lf-lang"><span style="opacity:.5">CSR + SSR </span> | <code>cookie_name: </code><span style="color: #b5bd68;font-size: 16px; opacity:.9;">"lf-lang"</span></a></h3>
<!-- markdownlint-enable MD013 -->
<p>Name of the <a href="https://developer.mozilla.org/docs/Web/HTTP/Cookies">cookie</a> that will be used to manage the current language. By default
it is <code>"lf-lang"</code>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    cookie_name: "lang",
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="csr---cookie_attrs-"><a class="header" href="#csr---cookie_attrs-"><span style="opacity:.5">CSR </span> | <code>cookie_attrs: </code><span style="color: #b5bd68;font-size: 16px; opacity:.9;">""</span></a></h3>
<!-- markdownlint-enable MD013 -->
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie#write_a_new_cookie">Cookie attributes</a> to set on the language <a href="https://developer.mozilla.org/docs/Web/HTTP/Cookies">cookie</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    cookie_attrs: "SameSite=Strict; Secure",
}}
<span class="boring">}</span></code></pre></pre>
<p>If value is an expression the <a href="https://developer.mozilla.org/docs/Web/HTTP/Cookies">cookie</a> will not be validated at compile time:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let attrs = "SameSite=Strict; Secure; MyCustomCookie=value"
leptos_fluent! {{
    // ...
    cookie_attrs: attrs,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr--ssr---initial_language_from_cookie"><a class="header" href="#csr--ssr---initial_language_from_cookie"><span style="opacity:.5">CSR + SSR </span> | <code>initial_language_from_cookie</code></a></h3>
<p>Get the initial language from the cookie.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_cookie: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---initial_language_from_cookie_to_localstorage"><a class="header" href="#csr---initial_language_from_cookie_to_localstorage"><span style="opacity:.5">CSR </span> | <code>initial_language_from_cookie_to_localstorage</code></a></h3>
<p>Get the initial language from the cookie and save it in the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_cookie_to_localstorage: true,
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="csr---set_language_to_cookie"><a class="header" href="#csr---set_language_to_cookie"><span style="opacity:.5">CSR </span> | <code>set_language_to_cookie</code></a></h3>
<p>Set the current language to the cookie.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    set_language_to_cookie: true,
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="system--initial_language_from_system"><a class="header" href="#system--initial_language_from_system"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | <code>initial_language_from_system</code></a></h3>
<!-- markdownlint-enable MD013 -->
<p>Get the initial language from the system.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_system: true,
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="system--initial_language_from_data_file"><a class="header" href="#system--initial_language_from_data_file"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | <code>initial_language_from_data_file</code></a></h3>
<!-- markdownlint-enable MD013 -->
<p>Get the initial language from a data file.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_data_file: true,
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="system--initial_language_from_system_to_data_file"><a class="header" href="#system--initial_language_from_system_to_data_file"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | <code>initial_language_from_system_to_data_file</code></a></h3>
<!-- markdownlint-enable MD013 -->
<p>Get the initial language from the system and save it in a data file.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_system_to_data_file: true,
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="system--set_language_to_data_file"><a class="header" href="#system--set_language_to_data_file"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | <code>set_language_to_data_file</code></a></h3>
<!-- markdownlint-enable MD013 -->
<p>Set the current language to a data file.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    set_language_to_data_file: true,
}}
<span class="boring">}</span></code></pre></pre>
<!-- markdownlint-disable MD013 -->
<h3 id="system--data_file_key-leptos-fluent"><a class="header" href="#system--data_file_key-leptos-fluent"><a href="https://mondeja.github.io/leptos-fluent/install.html#desktop-applications"><img src="feat.png" width="23px" style="position:relative; bottom: 5px; left: 2px" alt="feat"></img></a><span style="opacity:.5;padding-right: -10px">system</span> | <code>data_file_key: </code><span style="color: #b5bd68;font-size: 16px; opacity:.9;">"leptos-fluent"</span></a></h3>
<!-- markdownlint-enable MD013 -->
<p>Key to manage the current language in the data file. It should be unique
per application.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    data_file_key: "my-app",
}}
<span class="boring">}</span></code></pre></pre>
<h3 id="provide_meta_context"><a class="header" href="#provide_meta_context"><code>provide_meta_context</code></a></h3>
<p>Provide the macro meta information at runtime as a context.
Get it using <code>I18n::meta</code>:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let i18n = leptos_fluent! {{
    // ...
    provide_meta_context: true,
}};

println!("Macro parameters: {:?}", i18n.meta().unwrap());
<span class="boring">}</span></code></pre></pre>
<h2 id="unreleased"><a class="header" href="#unreleased">Unreleased</a></h2>
<h3 id="initial_language_from_server_function"><a class="header" href="#initial_language_from_server_function"><code>initial_language_from_server_function</code></a></h3>
<p>Get the initial language from a <a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_server_function: initial_language_server_function,
}}

/// Server function to set the initial language
#[server(InitialLanguage, "/api")]
pub async fn initial_language_server_function(
) -&gt; Result&lt;Option&lt;String&gt;, ServerFnError&gt; {
    // .. replace with your own logic
    Ok(Some("es".to_string()))
}
<span class="boring">}</span></code></pre></pre>
<p>This parameter type is not like the <code>initial_language_from_*</code> parameters, it
takes an identifier to the <a href="https://book.leptos.dev/server/25_server_functions.html">server function</a> that will be called to get the
initial language.</p>
<p>The function must return a <code>Result&lt;Option&lt;String&gt;, ServerFnError&gt;</code>.</p>
<h3 id="set_language_to_server_function"><a class="header" href="#set_language_to_server_function"><code>set_language_to_server_function</code></a></h3>
<p>Set the current language to a <a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    set_language_to_server_function: set_language_server_function,
}}

/// Server function to update the current language
#[server(SetLanguage, "/api")]
pub async fn set_language_server_function(
    language: String,
) -&gt; Result&lt;(), ServerFnError&gt; {
    // .. replace with your own logic
    Ok(())
}
<span class="boring">}</span></code></pre></pre>
<p>This parameter type is not like the <code>set_language_to_*</code> parameters, it
takes an identifier to the <a href="https://book.leptos.dev/server/25_server_functions.html">server function</a> that will be called to update
the current language.</p>
<p>The function must return a <code>Result&lt;(), ServerFnError&gt;</code>.</p>
<h3 id="initial_language_from_localstorage_to_server_function"><a class="header" href="#initial_language_from_localstorage_to_server_function"><code>initial_language_from_localstorage_to_server_function</code></a></h3>
<p>Get the initial language from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">local storage</a> and set it to a
<a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_localstorage_to_server_function: set_language_server_function,
}}

#[server(SetLanguage, "/api")]
pub async fn set_language_server_function(
    language: String,
) -&gt; Result&lt;(), ServerFnError&gt; {
    // .. replace with your own logic
    Ok(())
}
<span class="boring">}</span></code></pre></pre>
<h3 id="initial_language_from_cookie_to_server_function"><a class="header" href="#initial_language_from_cookie_to_server_function"><code>initial_language_from_cookie_to_server_function</code></a></h3>
<p>Get the initial language from a <a href="https://developer.mozilla.org/docs/Web/HTTP/Cookies">cookie</a> and set it to a
<a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_cookie_to_server_function: set_language_server_function,
}}

#[server(SetLanguage, "/api")]
pub async fn set_language_server_function(
    language: String,
) -&gt; Result&lt;(), ServerFnError&gt; {
    // .. replace with your own logic
    Ok(())
}
<span class="boring">}</span></code></pre></pre>
<h3 id="initial_language_from_navigator_to_server_function"><a class="header" href="#initial_language_from_navigator_to_server_function"><code>initial_language_from_navigator_to_server_function</code></a></h3>
<p>Get the initial language from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator/languages"><code>navigator.languages</code></a> and set it to a
<a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_navigator_to_server_function: set_language_server_function,
}}

#[server(SetLanguage, "/api")]
pub async fn set_language_server_function(
    language: String,
) -&gt; Result&lt;(), ServerFnError&gt; {
    // .. replace with your own logic
    Ok(())
}
<span class="boring">}</span></code></pre></pre>
<h3 id="initial_language_from_url_param_to_server_function"><a class="header" href="#initial_language_from_url_param_to_server_function"><code>initial_language_from_url_param_to_server_function</code></a></h3>
<p>Get the initial language from a <a href="https://developer.mozilla.org/es/docs/Web/API/URLSearchParams">URL parameter</a> and set it to a
<a href="https://book.leptos.dev/server/25_server_functions.html">server function</a>.</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>leptos_fluent! {{
    // ...
    initial_language_from_url_param_to_server_function: set_language_server_function,
}}

#[server(SetLanguage, "/api")]
pub async fn set_language_server_function(
    language: String,
) -&gt; Result&lt;(), ServerFnError&gt; {
    // .. replace with your own logic
    Ok(())
}
<span class="boring">}</span></code></pre></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="ace.js"></script>
        <script src="editor.js"></script>
        <script src="mode-rust.js"></script>
        <script src="theme-dawn.js"></script>
        <script src="theme-tomorrow_night.js"></script>

        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
